---
title: ä¸å®šæœŸæ›´æ–°çš„æ­£åˆ™è¡¨è¾¾å¼ç»éªŒåº“
date: 2020-05-22
tags:
 - æ­£åˆ™è¡¨è¾¾å¼
categories:
 - å·¥å…·
---

æ­£åˆ™ç®€ç›´æ˜¯ä¼´éšç¨‹åºå‘˜æ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„å­˜åœ¨ï¼Œä¸è®ºåšå‰ç«¯è¿˜æ˜¯åç«¯ã€‚è¿™é‡Œè®°å½•ä¸‹æˆ‘æ—¥å¸¸ç´¯ç§¯çš„ä¸€äº›å…³äºæ­£åˆ™è¡¨è¾¾å¼çš„çŸ¥è¯†ç‚¹ï¼Œä»¥æ­¤å……å½“ä¸€ä¸ªä¸ªäººæ­£åˆ™é€ŸæŸ¥æ‰‹å†Œ

<!-- more -->

## ä¸»è¦çš„æ­£åˆ™è§„åˆ™

| æ­£åˆ™   | å«ä¹‰                                                  |
| ------ | ----------------------------------------------------- |
| \d \s  | æ•°å­— ç©ºæ ¼                                             |
| \w     | å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ï¼Œç­‰åŒäºï¼š[a-zA-Z0-9_]                  |
| [abc]  | a b c ä¸­ä»»æ„ä¸€ä¸ª                                      |
| [^abc] | ä¸æ˜¯a b c ä¸­ä»»æ„ä¸€ä¸ª                                  |
| \b \B  | å­—ç¬¦ä¸²è¾¹ç•Œ éå­—ç¬¦è¾¹ç•Œ /\baaa/ ä¸èƒ½åŒ¹é…xaaa èƒ½åŒ¹é…â€™aaa |
| \t     | tab                                                   |
| a{3,4} | è¡¨ç¤ºaè‡³å°‘è¿ç»­å‡ºç°3æ¬¡ä¸å¤šäº4æ¬¡                         |
| ab\|cd | åŒ¹é…abæˆ–cd                                            |



## æ­£åˆ™åœ¨JavaScriptä¸­çš„è¯­æ³•åº”ç”¨

1. `string`åªæœ‰ä¸€ä¸ªæ­£åˆ™æ–¹æ³•`match` 

   - å¦‚æœæœ‰åŒ¹é…åˆ°ï¼š 
     1. å½“æ­£åˆ™ä¸å¸¦gï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­ç¬¬ä¸€ä½æ˜¯åŒ¹é…åˆ°çš„å€¼ã€‚é‡å¤æ‰§è¡Œä¹Ÿæ°¸è¿œè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…åˆ°çš„ç»“æœ 
     2. å½“æ­£åˆ™å¸¦gæ—¶å®ƒå¯ä»¥ä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰çš„åŒ¹é…å€¼çš„æ•°ç»„ï¼Œå¦åˆ™å’Œ`regex.exec(str)`çš„è¿”å›ä¸€æ · 

   - æ²¡æœ‰åŒ¹é…åˆ°ï¼Œè¿”å›null

   ```javascript
   regex = /(\d{4})-(\d{2})-(\d{2})/g
   regex2 = /(\d{4})-(\d{2})-(\d{2})
   
   string = '2017-06-12 2018-01-12'
   string.match(regex) //["2017-06-12", "2018-01-12"]
   string.match(regex2) //["2017-06-12", "2017", "06", "12", index: 0, input: "2017-06-12 2018-01-12", groups: undefined]
   ```

   æ‰€ä»¥å¦‚æœä½¿ç”¨`string.match`æ­£å¸¸æƒ…å†µéƒ½è¦å¸¦`g`ï¼Œä¸ç„¶å®¹æ˜“æœ‰æ­§ä¹‰ã€‚

2. `Regex`æœ‰ä¸¤ä¸ªæ–¹æ³•`test`å’Œ`exec`
   - `test`åªè¿”å›ä¸€ä¸ª`boolean`
   - `exec`è¿”å›æ‰§è¡ŒåŒ¹é…çš„ç»“æœ

```javascript
regex = /(\d{4})-(\d{2})-(\d{2})/g
regex2 = /(\d{4})-(\d{2})-(\d{2})

var string = '2017-06-12 2018-01-12'
// test è¿”å›çš„æ˜¯ true/false
regex.test(string) // true
regex2.test(string)  //true

//execå¦‚æœæ˜¯æ‰§è¡Œå¸¦gçš„æ­£åˆ™ï¼Œæ¯æ¬¡æ‰§è¡Œä¼šè®°å½•ä¸‹æœ€åä¸€æ¬¡åŒ¹é…çš„index, ç›´åˆ°åŒ¹é…å¤±è´¥è¿”å›nullï¼Œæ‰€ä»¥execå¯ä»¥é…åˆwhileæ“ä½œ

regex.exec(string) // ["2017-06-12", "2017", "06", "12", index: 0, input: "2017-06-12 2018-01-12", groups: undefined]
regex.exec(string) // ["2018-01-12", "2018", "01", "12", index: 11, input: "2017-06-12 2018-01-12", groups: undefined]
regex.exec(string) // null

//å¦‚æœæ­£åˆ™ä¸å¸¦gï¼Œ é‚£ä¸ªexecä¸ç®¡æ‰§è¡Œå¤šå°‘æ¬¡éƒ½æ˜¯è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…
regex2.exec(string) // ["2017-06-12", "2017", "06", "12", index: 0, input: "2017-06-12 2018-01-12", groups: undefined]

//è¿”å›çš„æ•°æ®ç»“æ„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œ0ä½æ˜¯åŒ¹é…åˆ°çš„å®Œæ•´å­—ä¸²ï¼Œ1~nä½æ˜¯æ­£åˆ™ä¸­åˆ†ç»„æ‰€åŒ¹é…åˆ°çš„å†…å®¹ï¼Œindexæ˜¯å½“å‰åŒ¹é…åˆ°çš„å¼€å§‹ä½ç½®
0: "2018-01-12"
1: "2018"
2: "01"
3: "12"
groups: undefined
index: 11
input: "2017-06-12 2018-01-12"
```

3. replaceçš„æ­£åˆ™ç”¨æ³•

```javascript
str.replace(regexp|substr, newSubStr|func) 
//newSubStræ”¯æŒç‰¹æ®Šå˜é‡

// "ğŸ°loHelğŸ•" åœ¨æœ‰åˆ†ç»„çš„æƒ…å†µä¸‹
'ğŸ°HelloğŸ•'.replace(/(Hel)(lo)/, '$2$1')

// "ğŸ°elloğŸ•elloğŸ•"
// Hè¢«æ›¿æ¢ä¸ºelloğŸ•
'ğŸ°HelloğŸ•'.replace(/H/, "$'")

// "ğŸ°ğŸ°elloğŸ•"
// Hè¢«æ›¿æ¢ä¸ºğŸ°
'ğŸ°HelloğŸ•'.replace(/H/, "$`")

//ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æ˜¯å‡½æ•°, å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å½“å‰åŒ¹é…åˆ°çš„å­—ä¸²ï¼Œåé¢å°±ç›¸å½“äºå‰é¢çš„$1,$2...
//å°†'2019-01-01'æ›¿æ¢ä¸º01/01/2019
var str = '2019-01-01'

var reg = /(\d{4})-(\d{2})-(\d{2})/

// 01/01/2019
var result = str.replace(reg, '$2/$3/$1')

// 01/01/2019
result = str.replace(reg, function (match, year, month, day) {
  return `${month}/${day}/${year}`
})
```

| å˜é‡å       | å«ä¹‰                         |
| ------------ | ---------------------------- |
| $1, $2, $3â€¦â€¦ | ç¬¬nä¸ªåˆ†ç»„åŒ¹é…çš„ç»“æœ          |
| $`           | æ’å…¥å½“å‰åŒ¹é…çš„å­ä¸²å·¦è¾¹çš„å†…å®¹ |
| $'           | æ’å…¥å½“å‰åŒ¹é…çš„å­ä¸²å³è¾¹çš„å†…å®¹ |
| $&           | å½“å‰åŒ¹é…çš„å­ä¸²               |

## è´ªå©ªä¸éè´ªå©ª

è´ªå©ªå°±æ˜¯`.*` ä»–ä¼šå°½é‡åŒ¹é…æœ€é•¿çš„å†…å®¹ å¦‚ä¸‹ä¼šè¿”å›`"witch" and her "broom"`  è€Œä¸æ˜¯ witchå’Œbroom

```javascript
var str = 'a "witch" and her "broom" is one';
str.match( /".*"/g); // æœ¬æ„æ˜¯è¦å¾—åˆ°ä¸¤ä¸ªå¼•å·ä¹‹é—´çš„å†…å®¹
```

åŸå› æ˜¯æ­£åˆ™é‡åˆ°`.*`æ—¶ä¼šå› ä¸º`.`æ˜¯å¯ä»¥åŒ¹é…ä»»æ„å­—ç¬¦çš„å­˜åœ¨ï¼Œæ‰€ä»¥å°±ç›´æ¥åŒ¹é…åˆ°äº†è¡Œå°¾ï¼Œè¿™æ—¶å€™å›å¤´ï¼ˆå›æº¯ï¼‰æ¥çœ‹`.*`ä¹‹åè¦åŒ¹é…ä»€ä¹ˆï¼Œç»“æœå°±ä¼šåŒ¹é…åˆ°è·ç¦»è¡Œå°¾æœ€è¿‘çš„ä¸€ä¸ª`"` éè´ªå©ªå°±æ˜¯`.*?`åŠ ä¸Šä¸€ä¸ªé—®å·ï¼Œå‘Šè¯‰æ­£åˆ™æ¯åŒ¹é…ä¸€ä¸ªå­—ç¬¦éƒ½è¦çœ‹ä¸€çœ¼ä¸‹ä¸€ä¸ªè¦åŒ¹é…çš„æ˜¯å•¥ï¼Œå¦‚æœèƒ½åŒ¹é…ä¸Šå°±ç›´æ¥è¿”å›ï¼Œè€Œä¸æ˜¯æ— é™ç»§ç»­

![image-20200522163939641](https://kuimo-markdown-pic.oss-cn-hangzhou.aliyuncs.com/image-20200522163939641.png)

## æ–­è¨€

å½“éœ€è¦åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ˜¯å¦æœ‰æŒ‡å®šå†…å®¹ï¼Œé™¤äº†ä½¿ç”¨é€šé…ï¼Œè¿˜å¯ä»¥æ–­è¨€ã€‚

æ–­è¨€å°±æ˜¯ç›´æ¥åˆ¤æ–­**æ˜¯ä¸æ˜¯**, `(?=p)`è¡¨ç¤ºå½“å‰å­—ç¬¦ä¹‹åçš„å­—ç¬¦è¦æ»¡è¶³pï¼Œ å®ƒåŒ¹é…çš„æ˜¯ä½ç½®ï¼Œä¸æ˜¯ä»»ä½•çš„å­—ç¬¦ä¸²ï¼Œå®ƒçš„åŠŸèƒ½ç±»ä¼¼`^$`

```javascript
/^.*hello.*$/im.test(page) // é€šé…ç¬¦æ¥æ»¡è¶³å‰åå¯èƒ½éƒ½æœ‰å†…å®¹
/^(?=.*hello).*$/im.test(page) // è¡¨ç¤ºå¼€å¤´ä¹‹åä¼šå‡ºç°ä¸€ä¸ªæ»¡è¶³.*helloçš„å­—ç¬¦ä¸²
```

![image-20200522144539735](https://kuimo-markdown-pic.oss-cn-hangzhou.aliyuncs.com/image-20200522144539735.png)

## æ­£åˆ™è¡¨è¾¾å¼çš„ä¸æˆ–é

#### ä¸

é—®é¢˜ï¼š åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦åŒæ—¶åŒ…å«helloå’Œworldï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨æ–­è¨€æ¥å®ç°åˆ¤æ–­å¤šä¸ªæ¡ä»¶ã€‚ è¿™ä¸ªå†™æ³•åªèƒ½helloåœ¨å‰worldåœ¨å

```javascript
/^(?=.*hello)(?=.*world).*$/im.test(page)
```

![image-20200522151019148](https://kuimo-markdown-pic.oss-cn-hangzhou.aliyuncs.com/image-20200522151019148.png)

#### æˆ–

é—®é¢˜ï¼šåˆ¤æ–­å­—ç¬¦ä¸²æœ‰helloæˆ–è€…world

```javascript
/^.*(hello|world).*$/im.test(page) // ä½¿ç”¨æˆ–æ“ä½œç¬¦
/^(?=.*(hello|world)).*$/im.test(page) // ä½¿ç”¨æ–­è¨€
```

![image-20200522151445651](https://kuimo-markdown-pic.oss-cn-hangzhou.aliyuncs.com/image-20200522151445651.png)

#### é

é—®é¢˜ï¼šåˆ¤æ–­å­—ç¬¦ä¸²åŒæ—¶ä¸åŒ…å«helloå’Œworldï¼Œ` (?!p)`å’Œ`(?=p)`åˆšå¥½ç›¸åï¼Œè¡¨ç¤ºå½“å‰ä¹‹åä¸æ»¡è¶³pè¿™ä¸ªæ¡ä»¶

```javascript
/^(?!.*(hello|world)).*/g.test(page)
```

![image-20200522152032692](https://kuimo-markdown-pic.oss-cn-hangzhou.aliyuncs.com/image-20200522152032692.png)



## å¸¸ç”¨æ­£åˆ™

```javascript
/([\w]*[\u4E00-\u9FA5]+[,ï¼Œï¼š:ã€‚ã€\w?]*[\u4E00-\u9FA5][\w]*)+/  // æ˜¯å¦æœ‰ä¸­æ–‡
/^[a-zA-Z\u4e00-\u9fa5][a-zA-Z\u4e00-\u9fa50-9-_]{1,254}$/  // é•¿åº¦ä¸º2-255,ä»¥å¤§å°å­—æ¯æˆ–ä¸­æ–‡å¼€å¤´ï¼Œå¯åŒ…å«æ•°å­—ã€ä¸‹åˆ’çº¿_å’Œè¿å­—ç¬¦-
/^[a-zA-Z\u4e00-\u9fa5](?!.*[@/=\s":<>{}[\]]).{1,127}$/  // ä»¥å¤§å°å†™å­—æ¯æˆ–ä¸­æ–‡å¼€å¤´ï¼Œä¸æ”¯æŒå­—ç¬¦@/:=\"<>}{[]å’Œç©ºæ ¼
```



#### å‚è€ƒ

[æ­£åˆ™çš„ä¸æˆ–é](https://juejin.im/post/5c36ecf7f265da616f702a61)

[æ­£åˆ™è´ªå©ªæ¨¡å¼vséè´ªå©ªæ¨¡å¼è¯¦è§£](https://www.jianshu.com/p/532a62d6baef)